import{_ as u,o,c,b as _,p as k,g as C,a as l,F as $,r as I,n as v,h as x,i as S,v as b,d as m,w as O,f as M,e as B}from"./entry-dfcf9776.mjs";const F={name:"PathSvg",props:{path:{type:String,required:!0}}},d=e=>(k("data-v-e4fd6e76"),e=e(),C(),e),N={class:"path-svg"},R={class:"path-svg-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"},V=d(()=>l("rect",{x:"6",y:"6",rx:"12",ry:"12",width:"88",height:"88",fill:"#ffa5a5",stroke:"#ffd8d8","stroke-width":"12"},null,-1)),j=d(()=>l("ellipse",{cx:"50",cy:"50",rx:"6",ry:"6",fill:"currentColor"},null,-1)),L={key:0},q=d(()=>l("rect",{x:"44",y:"12",width:"12",height:"38",fill:"currentColor"},null,-1)),z=d(()=>l("ellipse",{cx:"50",cy:"0",rx:"6",ry:"6",fill:"currentColor"},null,-1)),G=[q,z],H={key:1},P=d(()=>l("rect",{x:"50",y:"44",width:"38",height:"12",fill:"currentColor"},null,-1)),T=d(()=>l("ellipse",{cx:"100",cy:"50",rx:"6",ry:"6",fill:"currentColor"},null,-1)),A=[P,T],D={key:2},E=d(()=>l("rect",{x:"44",y:"50",width:"12",height:"38",fill:"currentColor"},null,-1)),J=d(()=>l("ellipse",{cx:"50",cy:"100",rx:"6",ry:"6",fill:"currentColor"},null,-1)),K=[E,J],Q={key:3},U=d(()=>l("rect",{x:"12",y:"44",width:"38",height:"12",fill:"currentColor"},null,-1)),W=d(()=>l("ellipse",{cx:"0",cy:"50",rx:"6",ry:"6",fill:"currentColor"},null,-1)),X=[U,W];function Y(e,i,t,s,n,a){return o(),c("div",N,[(o(),c("svg",R,[V,j,t.path[0]==="1"?(o(),c("g",L,G)):_("",!0),t.path[1]==="1"?(o(),c("g",H,A)):_("",!0),t.path[2]==="1"?(o(),c("g",D,K)):_("",!0),t.path[3]==="1"?(o(),c("g",Q,X)):_("",!0)]))])}var Z=u(F,[["render",Y],["__scopeId","data-v-e4fd6e76"]]);const ee={name:"Field",props:{field:{type:Object,required:!0},status:{type:String,default:"loading"}},methods:{changeItemOffset(e,i){this.$emit("changeItemOffset",e,i)}}},te=["onClick"],ie={class:"field-item-inner"};function se(e,i,t,s,n,a){const f=Z;return o(),c("div",{class:x(["field",{complete:t.status==="complete"}])},[l("div",{class:"field-inner",style:v({width:t.field.width+"px",height:t.field.height+"px"})},[(o(!0),c($,null,I(t.field.items,(h,g)=>S((o(),c("div",{key:"field-item-"+g,class:"field-item",style:v({top:100/t.field.height_c*h.y+"%",left:100/t.field.width_c*h.x+"%",width:100/t.field.width_c+"%",height:100/t.field.height_c+"%",transform:`rotate(${90*h.offset}deg)`}),onClick:p=>a.changeItemOffset(h.index,1)},[l("div",ie,[m(f,{path:h.value},null,8,["path"])])],12,te)),[[b,h.value!=="0000"]])),128))],4)],2)}var he=u(ee,[["render",se],["__scopeId","data-v-0dfc06b4"]]);const le={name:"Level",data:()=>({game:{field:{width:600,height:600,width_c:4,height_c:4,items:[]},status:"loading"}}),computed:{},methods:{gameInit(){this.$route.params.id>200&&this.$route.params.id<=400&&(this.game.field.width_c=5,this.game.field.height_c=5),this.$route.params.id>400&&(this.game.field.width_c=6,this.game.field.height_c=6);let e=this.getHash(this.$route.params.id).toString(2);for(let i=0;i<this.game.field.height_c;i++)for(let t=0;t<this.game.field.width_c;t++){let s="";s+=i===0?"0":this.game.field.items[(i-1)*this.game.field.height_c+t].value[2]||"0",s+=t===this.game.field.width_c-1?"0":(e=e.slice(0,-1)).substring(e.length-1)||"0",s+=i===this.game.field.height_c-1?"0":(e=e.slice(0,-1)).substring(e.length-1)||"0",s+=t===0?"0":this.game.field.items[i*this.game.field.height_c+t-1].value[1]||"0",this.game.field.items.push({index:i*this.game.field.height_c+t,value:s,offset:Math.round(Math.random()*3+1),y:i,x:t})}this.checkFieldStatus()&&this.fieldRefresh(),this.game.status="playing",this.checkFieldStatus()&&(this.game.status="complete")},getHash(e,i=1){let t=3735928559^i,s=1103547991^i;for(let n=0,a;n<e.length;n++)a=e.charCodeAt(n),t=Math.imul(t^a,2654435761),s=Math.imul(s^a,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(s^s>>>13,3266489909),s=Math.imul(s^s>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&s)+(t>>>0)},checkFieldStatus(){for(let e=0;e<this.game.field.height_c;e++)for(let i=0;i<this.game.field.width_c;i++){const t=this.game.field.items[e*this.game.field.height_c+i].offset,s=this.game.field.items[e*this.game.field.height_c+i].value[(5-t%4)%4],n=this.game.field.items[e*this.game.field.height_c+i].value[(6-t%4)%4],a=this.game.field.items[e*this.game.field.height_c+i].value[(4-t%4)%4],f=this.game.field.items[e*this.game.field.height_c+i].value[(7-t%4)%4],h=i!==this.game.field.width_c-1?this.game.field.items[e*this.game.field.height_c+i+1]:null,g=h?h.offset:null,p=h?h.value[(7-g%4)%4]:null,r=e!==this.game.field.height_c-1?this.game.field.items[(e+1)*this.game.field.height_c+i]:null,w=r?r.offset:null,y=r?r.value[(4-w%4)%4]:null;if(i===0&&f!=="0"||i===this.game.field.width_c-1&&s!=="0"||e===0&&a!=="0"||e===this.game.field.height_c-1&&n!=="0"||h&&s!==p||r&&n!==y)return!1}return!0},fieldRefresh(){for(let e=0;e<this.game.field.height_c;e++)for(let i=0;i<this.game.field.width_c;i++)this.game.field.items[e*this.game.field.height_c+i].offset=Math.round(Math.random()*3+1)},changeItemOffset(e,i){this.game.status==="playing"&&(this.game.field.items[e].offset+=i,this.checkFieldStatus()&&(this.game.status="complete",console.log(this.game.status)))}},mounted(){this.gameInit()}},ae={class:"level container"},oe=B(" Next level ");function ce(e,i,t,s,n,a){const f=he,h=M;return o(),c("div",ae,[m(f,{field:e.game.field,status:e.game.status,onChangeItemOffset:a.changeItemOffset},null,8,["field","status","onChangeItemOffset"]),l("div",{class:x(["level-next",{complete:e.game.status==="complete"}])},[m(h,{class:"level-next__link",to:`/level/${Number(e.$route.params.id)+1}/`},{default:O(()=>[oe]),_:1},8,["to"])],2)])}var ne=u(le,[["render",ce],["__scopeId","data-v-54e6ffa5"]]);export{ne as default};
