import{_ as u,o,c,e as g,p as k,g as S,a as h,h as x,F as b,r as I,n as p,i as w,j as $,v as O,b as _,w as F,f as M,d as B}from"./entry-481bdba4.mjs";const N={name:"PathSvg",props:{path:{type:String,required:!0}}},d=e=>(k("data-v-e4fd6e76"),e=e(),S(),e),R={class:"path-svg"},V={class:"path-svg-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"},j=d(()=>h("rect",{x:"6",y:"6",rx:"12",ry:"12",width:"88",height:"88",fill:"#ffa5a5",stroke:"#ffd8d8","stroke-width":"12"},null,-1)),L=d(()=>h("ellipse",{cx:"50",cy:"50",rx:"6",ry:"6",fill:"currentColor"},null,-1)),P={key:0},q=d(()=>h("rect",{x:"44",y:"12",width:"12",height:"38",fill:"currentColor"},null,-1)),z=d(()=>h("ellipse",{cx:"50",cy:"0",rx:"6",ry:"6",fill:"currentColor"},null,-1)),H=[q,z],T={key:1},A=d(()=>h("rect",{x:"50",y:"44",width:"38",height:"12",fill:"currentColor"},null,-1)),D=d(()=>h("ellipse",{cx:"100",cy:"50",rx:"6",ry:"6",fill:"currentColor"},null,-1)),E=[A,D],G={key:2},J=d(()=>h("rect",{x:"44",y:"50",width:"12",height:"38",fill:"currentColor"},null,-1)),K=d(()=>h("ellipse",{cx:"50",cy:"100",rx:"6",ry:"6",fill:"currentColor"},null,-1)),Q=[J,K],U={key:3},W=d(()=>h("rect",{x:"12",y:"44",width:"38",height:"12",fill:"currentColor"},null,-1)),X=d(()=>h("ellipse",{cx:"0",cy:"50",rx:"6",ry:"6",fill:"currentColor"},null,-1)),Y=[W,X];function Z(e,i,t,s,n,a){return o(),c("div",R,[(o(),c("svg",V,[j,L,t.path[0]==="1"?(o(),c("g",P,H)):g("",!0),t.path[1]==="1"?(o(),c("g",T,E)):g("",!0),t.path[2]==="1"?(o(),c("g",G,Q)):g("",!0),t.path[3]==="1"?(o(),c("g",U,Y)):g("",!0)]))])}var ee=u(N,[["render",Z],["__scopeId","data-v-e4fd6e76"]]);const te={name:"Field",components:{PathSvg:ee},props:{field:{type:Object,required:!0},status:{type:String,default:"loading"}},methods:{changeItemOffset(e,i){this.$emit("changeItemOffset",e,i)}}},ie=["onClick"],se={class:"field-item-inner"};function le(e,i,t,s,n,a){const r=x("PathSvg");return o(),c("div",{class:w(["field",{complete:t.status==="complete"}])},[h("div",{class:"field-inner",style:p({width:t.field.width+"px",height:t.field.height+"px"})},[(o(!0),c(b,null,I(t.field.items,(l,m)=>$((o(),c("div",{key:"field-item-"+m,class:"field-item",style:p({top:100/t.field.height_c*l.y+"%",left:100/t.field.width_c*l.x+"%",width:100/t.field.width_c+"%",height:100/t.field.height_c+"%",transform:`rotate(${90*l.offset}deg)`}),onClick:v=>a.changeItemOffset(l.index,1)},[h("div",se,[_(r,{path:l.value},null,8,["path"])])],12,ie)),[[O,l.value!=="0000"]])),128))],4)],2)}var he=u(te,[["render",le],["__scopeId","data-v-3bc48459"]]);const ae={name:"Level",components:{Field:he},data:()=>({game:{field:{width:600,height:600,width_c:4,height_c:4,items:[]},status:"loading"}}),computed:{},methods:{gameInit(){this.$route.params.id>200&&this.$route.params.id<=400&&(this.game.field.width_c=5,this.game.field.height_c=5),this.$route.params.id>400&&(this.game.field.width_c=6,this.game.field.height_c=6);let e=this.getHash(this.$route.params.id).toString(2);for(let i=0;i<this.game.field.height_c;i++)for(let t=0;t<this.game.field.width_c;t++){let s="";s+=i===0?"0":this.game.field.items[(i-1)*this.game.field.height_c+t].value[2]||"0",s+=t===this.game.field.width_c-1?"0":(e=e.slice(0,-1)).substring(e.length-1)||"0",s+=i===this.game.field.height_c-1?"0":(e=e.slice(0,-1)).substring(e.length-1)||"0",s+=t===0?"0":this.game.field.items[i*this.game.field.height_c+t-1].value[1]||"0",this.game.field.items.push({index:i*this.game.field.height_c+t,value:s,offset:Math.round(Math.random()*3+1),y:i,x:t})}this.checkFieldStatus()&&this.fieldRefresh(),this.game.status="playing",this.checkFieldStatus()&&(this.game.status="complete")},getHash(e,i=1){let t=3735928559^i,s=1103547991^i;for(let n=0,a;n<e.length;n++)a=e.charCodeAt(n),t=Math.imul(t^a,2654435761),s=Math.imul(s^a,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(s^s>>>13,3266489909),s=Math.imul(s^s>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&s)+(t>>>0)},checkFieldStatus(){for(let e=0;e<this.game.field.height_c;e++)for(let i=0;i<this.game.field.width_c;i++){const t=this.game.field.items[e*this.game.field.height_c+i].offset,s=this.game.field.items[e*this.game.field.height_c+i].value[(5-t%4)%4],n=this.game.field.items[e*this.game.field.height_c+i].value[(6-t%4)%4],a=this.game.field.items[e*this.game.field.height_c+i].value[(4-t%4)%4],r=this.game.field.items[e*this.game.field.height_c+i].value[(7-t%4)%4],l=i!==this.game.field.width_c-1?this.game.field.items[e*this.game.field.height_c+i+1]:null,m=l?l.offset:null,v=l?l.value[(7-m%4)%4]:null,f=e!==this.game.field.height_c-1?this.game.field.items[(e+1)*this.game.field.height_c+i]:null,y=f?f.offset:null,C=f?f.value[(4-y%4)%4]:null;if(i===0&&r!=="0"||i===this.game.field.width_c-1&&s!=="0"||e===0&&a!=="0"||e===this.game.field.height_c-1&&n!=="0"||l&&s!==v||f&&n!==C)return!1}return!0},fieldRefresh(){for(let e=0;e<this.game.field.height_c;e++)for(let i=0;i<this.game.field.width_c;i++)this.game.field.items[e*this.game.field.height_c+i].offset=Math.round(Math.random()*3+1)},changeItemOffset(e,i){this.game.status==="playing"&&(this.game.field.items[e].offset+=i,this.checkFieldStatus()&&(this.game.status="complete",console.log(this.game.status)))}},mounted(){this.gameInit()}},oe={class:"level container"},ce=B(" Next level ");function de(e,i,t,s,n,a){const r=x("Field"),l=M;return o(),c("div",oe,[_(r,{field:e.game.field,status:e.game.status,onChangeItemOffset:a.changeItemOffset},null,8,["field","status","onChangeItemOffset"]),h("div",{class:w(["level-next",{complete:e.game.status==="complete"}])},[_(l,{class:"level-next__link",to:`/level/${Number(e.$route.params.id)+1}/`},{default:F(()=>[ce]),_:1},8,["to"])],2)])}var re=u(ae,[["render",de],["__scopeId","data-v-631cdb2b"]]);export{re as default};
